{"version":3,"file":"./frontend/assignment.b3cd3f45b14a0b78ce6e.hot-update.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAE2E;AACxC;AACG;;AAEtC,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA,gBAAgB,0BAA0B;AAC1C;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,OAAO,IAAI;AACpC;AACA,wBAAwB,IAAI,oCAAoC;AAChE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,2DAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA,8CAA8C,0BAA0B;AACxE,GAAG;AACH;AACA,WAAW,wBAAwB;;AAEnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,gDAAgD,QAAQ;AACxD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,qBAAqB;AACrB;;AAEA,CAAC,qDAAU;AACX;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE,yDAAc;AAChB;;AAEA;AACA;AACA;AACA,EAAE,yDAAc;AAChB;AACA,EAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAE,yDAAc;AAChB;AACA;AACA,EAAE;;;;;;;;;UClOF","sources":["webpack://learnpress-assignments/./assets/src/js/frontend/assignment.js","webpack://learnpress-assignments/webpack/runtime/getFullHash"],"sourcesContent":["/**\n * Single Assignment Frontend JS\n *\n * @since 4.1.2\n * @version 1.0.0\n */\n\nimport { lpFetchAPI, lpSetLoadingEl, lpOnElementReady } from '../utils.js';\nimport Toastify from 'toastify-js';\nimport 'toastify-js/src/toastify.css';\n\nconst toastifyAssignment = Toastify( {\n\tgravity: lpData.toast.gravity, // `top` or `bottom`\n\tposition: lpData.toast.position, // `left`, `center` or `right`\n\tclose: lpData.toast.close == 1,\n\tclassName: `${ lpData.toast.classPrefix }`,\n\tstopOnFocus: lpData.toast.stopOnFocus == 1,\n\tduration: lpData.toast.duration,\n} );\n\nconst countDown = ( elCountDown, elForm, timeRemaining ) => {\n\tconst elProgress = elCountDown.querySelector( '.progress-number' );\n\tif ( ! elProgress ) {\n\t\treturn;\n\t}\n\n\tlet interval = setInterval( function () {\n\t\tconst hours = Math.floor( timeRemaining / 3600 );\n\t\tconst minutes = Math.floor( ( timeRemaining % 3600 ) / 60 );\n\t\tconst secs = timeRemaining % 60;\n\t\tconst timeFormat = `${ hours }:${ minutes\n\t\t\t.toString()\n\t\t\t.padStart( 2, '0' ) }:${ secs.toString().padStart( 2, '0' ) }`;\n\t\telProgress.innerHTML = timeFormat;\n\n\t\tif ( timeRemaining < 1 ) {\n\t\t\tclearInterval( interval );\n\t\t\tconst action = elForm.querySelector( 'input[name=action]' );\n\t\t\tif ( ! action ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taction.value = 'send';\n\t\t\telForm.submit();\n\t\t} else {\n\t\t\ttimeRemaining -= 1;\n\t\t}\n\t}, 1000 );\n};\n\n/**\n * Count down\n *\n * @since 4.1.2\n * @version 1.0.0\n */\nlpOnElementReady( '.assignment-countdown', ( el ) => {\n\tif ( lpAssignment === undefined ) {\n\t\treturn;\n\t}\n\n\tif ( ! lpAssignment.timeRemaining ) {\n\t\treturn;\n\t}\n\n\tconst elForm = document.querySelector( 'form[name=save-assignment]' );\n\tif ( ! elForm ) {\n\t\treturn;\n\t}\n\n\t// For case unlimited time\n\tconst duration = parseInt( lpAssignment.assignmentDuration );\n\tif ( duration <= 0 ) {\n\t\treturn;\n\t}\n\n\tconst timeRemaining = parseInt( lpAssignment.timeRemaining );\n\n\t// Auto submit assignment when time remaining is 0\n\tif ( timeRemaining <= 0 ) {\n\t\tconst action = elForm.querySelector( 'input[name=action]' );\n\t\tif ( ! action ) {\n\t\t\treturn;\n\t\t}\n\n\t\taction.value = 'send';\n\t\telForm.submit();\n\n\t\treturn;\n\t}\n\n\tcountDown( el, elForm, timeRemaining );\n} );\n\n/**\n * Delete file upload of user\n *\n * @since 4.1.2\n * @version 1.0.0\n */\nconst lpAssignmentDeleteUserFile = ( elDeleteFile ) => {\n\tconst form = elDeleteFile.closest( 'form' );\n\tif ( ! form ) {\n\t\treturn;\n\t}\n\n\tconst elLi = elDeleteFile.closest( 'li' );\n\n\tconst courseId = form.querySelector( 'input[name=\"course-id\"]' ).value;\n\tconst assignmentId = form.querySelector(\n\t\t'input[name=\"assignment-id\"]'\n\t).value;\n\tconst file = elDeleteFile.dataset.file;\n\tconst messAlert = elDeleteFile.dataset.confirm;\n\tif ( ! confirm( messAlert ) ) {\n\t\treturn;\n\t}\n\n\tconst url =\n\t\tlpData.lp_rest_url + 'learnpress/v1/assignments/delete-submit-file';\n\tconst dataSend = {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'X-WP-Nonce': lpData.nonce,\n\t\t},\n\t\tbody: JSON.stringify( {\n\t\t\tcourse_id: parseInt( courseId ),\n\t\t\tassignment_id: parseInt( assignmentId ),\n\t\t\tfile_id: file,\n\t\t} ),\n\t};\n\n\tconst callBack = {\n\t\tbefore: () => {\n\t\t\ttoastifyAssignment.options.className = `${ lpData.toast.classPrefix }`;\n\t\t},\n\t\tsuccess: ( response ) => {\n\t\t\tconst { data, status, message } = response;\n\n\t\t\tif ( status === 'success' ) {\n\t\t\t\telLi.remove();\n\t\t\t\tconst elNumberFileCanUpload = form.querySelector(\n\t\t\t\t\t'.assignment-number-file-can-upload'\n\t\t\t\t);\n\t\t\t\tconst elInputFile = form.querySelector( '#_lp_upload_file' );\n\n\t\t\t\tif (\n\t\t\t\t\tdata.number_file_can_upload &&\n\t\t\t\t\tdata.number_file_can_upload > 0\n\t\t\t\t) {\n\t\t\t\t\telNumberFileCanUpload.innerHTML =\n\t\t\t\t\t\tdata.number_file_can_upload;\n\t\t\t\t\telInputFile.disabled = false;\n\t\t\t\t} else {\n\t\t\t\t\telInputFile.disabled = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttoastifyAssignment.options.text = message;\n\t\t\ttoastifyAssignment.options.className += ` ${ status }`;\n\t\t\ttoastifyAssignment.showToast();\n\t\t},\n\t\terror: ( err ) => {\n\t\t\ttoastifyAssignment.options.text = err.message;\n\t\t\ttoastifyAssignment.options.className += ' error';\n\t\t\ttoastifyAssignment.showToast();\n\t\t},\n\t\tcompleted: () => {},\n\t};\n\n\tlpFetchAPI( url, dataSend, callBack );\n};\n\n// Events\ndocument.addEventListener( 'submit', ( e ) => {\n\tconst target = e.target;\n\n\t// Event start assignment\n\tif ( target.classList.contains( 'start-assignment' ) ) {\n\t\tconst btnSubmit = target.querySelector( 'button[type=\"submit\"]' );\n\t\tlpSetLoadingEl( btnSubmit, 1 );\n\t}\n\n\t// Event start assignment\n\tif ( target.classList.contains( 'retake-assignment' ) ) {\n\t\tconst btnSubmit = target.querySelector( 'button[type=\"submit\"]' );\n\t\tlpSetLoadingEl( btnSubmit, 1 );\n\t}\n} );\n\ndocument.addEventListener( 'click', ( e ) => {\n\tconst target = e.target;\n\n\t// Event delete file user upload\n\tif ( target.classList.contains( 'assignment-delete-user-file' ) ) {\n\t\tlpAssignmentDeleteUserFile( target );\n\t}\n\n\t// Event save or send answer of user\n\tif (\n\t\ttarget.classList.contains( 'lp-btn-assignment-save' ) ||\n\t\ttarget.classList.contains( 'lp-btn-assignment-send' )\n\t) {\n\t\tconst form = target.closest( 'form' );\n\t\tif ( ! form ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elAction = form.querySelector( 'input[name=action]' );\n\t\tif ( ! elAction ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst action = target.value;\n\t\telAction.value = action;\n\t\tif ( action === 'send' ) {\n\t\t\tconst confirmMessage = target.dataset.confirm;\n\t\t\tif ( ! confirm( confirmMessage ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tlpSetLoadingEl( target, 1 );\n\t\tform.submit();\n\t}\n} );\n","__webpack_require__.h = () => (\"29fda47e2727127bf878\")"],"names":[],"sourceRoot":""}