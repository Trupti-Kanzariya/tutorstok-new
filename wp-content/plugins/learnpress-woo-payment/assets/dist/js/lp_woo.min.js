(()=>{"use strict";const e="loading",t=(t,o)=>{t&&(o?t.classList.add(e):t.classList.remove(e))};document.addEventListener("submit",(function(e){const t=e.target;"form-add-item-to-cart"===t.name&&o(e,t)}));const o=function(e,o){e.preventDefault();const n=document.querySelector(".thim-login-popup .login");if(n&&"yes"!==lpWoo.woo_enable_signup_and_login_from_checkout&&"yes"!==lpWoo.woocommerce_enable_guest_checkout&&0===parseInt(lpData.user_id))return void n.click();let r=o.querySelector('input[name="item-id"]');if(!r)return;const a=r.value,c=lpData.urlParams.lang?`?lang=${lpData.urlParams.lang}`:"",i=o.querySelector(".lp-btn-add-item-to-cart");i&&t(i,1);let l=new FormData(o);l.append("action","lpWooAddItemToCart"),l.append("nonce",lpWoo.nonce),fetch(lpWoo.url_ajax+c,{method:"POST",body:l}).then((e=>e.text())).then((e=>{const t=JSON.parse(e),{data:n,status:r,message:c}=t;if("error"!==r)if(void 0!==n.redirect_to&&""!==n.redirect_to)window.location=n.redirect_to;else{document.querySelectorAll(`input[name="item-id"][value="${a}"]`).forEach((e=>{e.closest("form[name=form-add-item-to-cart]").outerHTML=n.button_view_cart}));const e=document.querySelectorAll(".minicart_hover .items-number");e.length&&e.forEach((e=>{e.innerHTML=n.count_items}));const t=document.querySelectorAll(".thim-ekits-mini-cart .cart-items-number");t.length&&t.forEach((e=>{e.innerHTML=n.count_items}));const o=document.querySelectorAll(".widget_shopping_cart_content");o.length&&o.forEach((e=>{e.innerHTML=n.widget_shopping_cart_content}))}else o.innerHTML=c})).catch((e=>console.log(e))).finally((()=>{i&&t(i,0)}))};window.addEventListener("pageshow",(function(e){(e.persisted||void 0!==window.performance&&"back_forward"===String(window.performance.getEntriesByType("navigation")[0].type))&&location.reload()}))})();